/* ===== Minimal, moderno, alto contrasto (STABILE) ===== */
:root{
  --bg: #ffffff;
  --text: #0b0b0c;
  --muted: #4b5563;
  --surface: #f8fafc;
  --border: #111827;
  --accent: #000000;
  --accent-contrast: #ffffff;
  --focus: #111827;
  /* Spaziatura pagina (override su mobile con safe-area) */
  --pad-top: 20px;
  --pad-right: 20px;
  --pad-bottom: 20px;
  --pad-left: 20px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font: 16px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  /* Altezza viewport accurata + padding con margini laterali/safe-area */
  min-height: calc(var(--vh, 1svh) * 100);
  overflow-x: hidden;
  padding: var(--pad-top) var(--pad-right) var(--pad-bottom) var(--pad-left);
}

.card{
  width:100%;
  max-width: 720px;
  background:var(--bg);
  /* La card occupa l'intera pagina visibile (meno padding esterno) */
  min-height: calc(var(--vh, 1svh) * 100 - var(--pad-top) - var(--pad-bottom));
  display:grid;
  grid-template-rows: auto 1fr; /* header + area contenuti a pagina intera */
  margin: 0 auto;
}

/* L'area contenuti può contrarsi senza causare overflow */
main{ min-height: 0 }

header{
  padding:8px 0 4px;
  background:var(--bg);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}
h1{
  margin:0 0 6px;
  font-size: clamp(20px, 5.5vw, 28px);
  line-height:1.15;
  letter-spacing:-0.02em;
  text-align:center;
}
header p{margin:0 0 10px; color:var(--muted)}

/* ===== Cards domande (una per volta) ===== */
.card-q{
  padding:16px;
  border:2px solid var(--border);
  border-radius:16px;
  margin:14px 0;
  background:var(--surface);
  position:relative;
  box-shadow: 0 1px 0 rgba(0,0,0,.08);
}
.card-q h3{
  margin:0 0 10px;
  font-size: clamp(18px, 5vw, 20px);
  text-align:center;
}

/* Mini progress a puntini */
.mini-progress{
  display:flex;
  gap:8px;
  margin:6px 0 10px;
  align-items:center;
  justify-content:center;
}
.mini-progress .dot{
  width:10px;
  height:10px;
  border:2px solid var(--border);
  border-radius:999px;
  background:transparent;
  opacity:.5;
}
.mini-progress .dot.filled{
  background:var(--accent);
  border-color:var(--border);
  opacity:1;
}

/* Nascondi card future finché non si risponde */
.hidden{ display:none }

/* ===== Opzioni radio (tap friendly) ===== */
.options-list{
  display:grid;
  gap:12px;
}

.opt{
  position:relative;
  border:2px solid var(--border);
  border-radius:16px;
  background:var(--bg);
  transition: transform .08s ease, background .15s ease, color .15s ease, border-color .15s ease;
  cursor:pointer;
  text-align:center;
  padding:0;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  display:block;
  overflow:hidden;
}
.opt:hover{ transform: translateY(-1px) }
.opt:active{ transform: translateY(0) }

.opt input{
  position:absolute;
  opacity:0;
  pointer-events:none;
}

.opt span{
  display:block;
  width:100%;
  padding:16px 14px; /* rimosso spazio per pallino */
  border-radius:14px;
  margin:0 auto;
  max-width: 100%;
  font-size: clamp(15px, 4.5vw, 16px);
  line-height:1.45;
  /* Evita overflow su testi lunghi */
  overflow-wrap: anywhere;
  word-break: break-word;
  hyphens: auto;
}

/* Cerchio radio centrato */
.opt span::before{
  content:"";
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  top: 8px;
  width:20px;
  height:20px;
  border-radius:50%;
  border:2px solid var(--border);
  background:transparent;
}
.opt span::after{
  content:"";
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  top:14px;
  width:12px;
  height:12px;
  border-radius:50%;
  background:transparent;
  transition: background .15s ease;
}

/* Rimuovi il pallino del radio su TUTTI i dispositivi */
.opt span::before,
.opt span::after{ display:none }

/* Stato selezionato */
.opt input:checked + span{
  background: var(--accent);
  color: var(--accent-contrast);
}
.opt input:checked + span::before{ border-color: var(--accent-contrast) }
.opt input:checked + span::after{ background: var(--accent-contrast) }

/* Colora il 100% della label quando selezionata */
.opt:has(input:checked){
  background: var(--accent);
  border-color: var(--border);
  color: var(--accent-contrast);
}
.opt:has(input:checked) span{
  background: transparent;
  color: inherit;
}
.opt:has(input:checked) span::before{ border-color: var(--accent-contrast) }
.opt:has(input:checked) span::after{ background: var(--accent-contrast) }

/* ===== Azioni ===== */
.actions{
  display:flex; gap:12px; margin:18px 0;
}
.actions-center{ justify-content:center; flex-wrap:wrap }
.primary, .ghost{
  font-weight:700;
  border-radius:12px;
  padding:14px 18px; /* più grande per dito */
  cursor:pointer;
  transition: transform .08s ease, background .15s ease, color .15s ease, border-color .15s ease;
  font-size: 16px;
  min-width: 220px;
}

.primary{
  background: var(--accent);
  color: var(--accent-contrast);
  border:2px solid var(--border);
}
.primary:hover{ transform: translateY(-1px) }
.primary:active{ transform: translateY(0) }
.primary:focus-visible{
  outline: 3px solid var(--focus);
  outline-offset: 2px;
}

.ghost{
  background: transparent;
  color: var(--text);
  border:2px solid var(--border);
}
.ghost:hover{ background: var(--surface) }
.ghost:focus-visible{
  outline: 3px solid var(--focus);
  outline-offset: 2px;
}

/* ===== Error / Result ===== */
.error{ display:none; color:#b91c1c; font-weight:700 }
.result{
  display:none;
  margin-top:10px;
  padding:16px;
  border:2px dashed var(--border);
  border-radius:12px;
  background:var(--surface);
}
.result h2{ margin:0 0 6px; font-size: clamp(18px, 5vw, 22px) }

/* ===== Mobile-first enhancements (sticky actions) ===== */
@media (max-width: 768px){
  /* Aggiorna padding con safe areas su mobile */
  :root{
    --pad-top: max(14px, env(safe-area-inset-top));
    --pad-right: max(16px, env(safe-area-inset-right));
    --pad-bottom: max(24px, env(safe-area-inset-bottom));
    --pad-left: max(16px, env(safe-area-inset-left));
  }
  body{ font-size: 17px; }
  .card{ max-width: 560px; margin: 0 auto; }

  /* Struttura verticale: 85% card + 15% (bottone + spazio vuoto) senza overflow */
  main{
    display:flex;
    flex-direction:column;
    min-height: 0; /* necessario per evitare overflow nei flex child */
    justify-content: space-between;
    align-items: stretch;
  }

  /* Area card: 85% dell'altezza disponibile di main */
  #quiz{
    position: relative;
    /* Occupare più spazio: riempi l'area disponibile */
    flex: 1 1 auto;
    min-height: 0;
    overflow: hidden; /* non mostra card prima/dopo */
  }
  #quiz .card-q{
    position: absolute;
    inset: 0;
    margin: 0;
    height: 100%;
    display: flex;
    flex-direction: column;
    min-height: 0; /* necessario per abilitare lo scroll dei figli */
    overscroll-behavior: contain; /* evita scroll-chaining verso body */
  }
  #quiz .card-q.hidden{ display:none }

  /* Solo la lista delle opzioni scorre se eccede l'area disponibile */
  #quiz .card-q .options-list{
    flex: 1 1 auto;
    min-height: 0;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-gutter: stable both-edges;
  }
  .card-q h3, .card-q .mini-progress{ flex: 0 0 auto }

  

  /* Area bottone: ~10% dello spazio */
  .actions{
    position: static;
    padding: 0;
    background: none;
    z-index: auto;
    flex: 0 0 10%;
    display:flex;
    align-items:center;
    justify-content:center;
    margin: 0;
  }
  .actions:before{ display:none }
  .primary, .ghost{
    width: 100%;
    min-width: 0;
    max-width: 560px;
    white-space: normal; /* testo lungo va a capo */
    overflow-wrap: anywhere;
    word-break: break-word;
  }

  /* Schermi piccoli: nascondi il bottone fino alla fine */
  .actions{ display: none; }
  .actions.show-on-mobile{ display:flex; }

  /* Risultato a tutto schermo (area contenuti sotto header) */
  .result.fullscreen{
    display: flex !important;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    flex: 1 1 auto;
    min-height: 100%;
    height: 100%;
    overflow: auto;
  }
}

/* Desktop centering */
@media (min-width: 769px){
  header{ justify-content: center; }
}

/* ===== Extra small phones ===== */
@media (max-width:420px){
  .card{ max-width: 100%; }
  header p{ font-size: 15px }
  h1{ font-size: clamp(19px, 7vw, 24px) }
  /* Coerente con mobile: niente spazio riservato al pallino */
  .opt span{ padding: 14px 12px }
}
/* RTL support */
html[dir="rtl"] { direction: rtl; }
